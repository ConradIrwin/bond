<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Bond [RDoc Documentation]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          Bond
        </h1>
        <ol class='paths'>
          <li>
            <a href="../files/lib/bond/actions_rb.html">lib/bond/actions.rb</a>
          </li>
          <li class='other'>
            <a href="../files/lib/bond/agent_rb.html">lib/bond/agent.rb</a>
          </li>
          <li class='other'>
            <a href="../files/lib/bond/mission_rb.html">lib/bond/mission.rb</a>
          </li>
          <li class='other'>
            <a href="../files/lib/bond/rawline_rb.html">lib/bond/rawline.rb</a>
          </li>
          <li class='other'>
            <a href="../files/lib/bond/search_rb.html">lib/bond/search.rb</a>
          </li>
          <li class='other'>
            <a href="../files/lib/bond/readline_rb.html">lib/bond/readline.rb</a>
          </li>
          <li class='other'>
            <a href="../files/lib/bond_rb.html">lib/bond.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            <a href="Bond.html">Bond</a> allows easy handling and creation of
            completion missions/rules with <a
            href="Bond.html#M000001">Bond.complete</a>. When <a
            href="Bond.html">Bond</a> is asked to autocomplete, <a
            href="Bond.html">Bond</a> looks up the completion missions in the order
            they were defined and picks the first one that matches what the user has
            typed. <a href="Bond/Agent.html">Bond::Agent</a> handles finding and
            executing the correct completion mission. Some pointers on
            using/understanding Bond:
            </p>
            <ul>
            <li><a href="Bond.html">Bond</a> can work outside of irb and readline when
            debriefed with <a href="Bond.html#M000003">Bond.debrief</a>. This should be
            called before any <a href="Bond.html#M000001">Bond.complete</a> calls.
            
            </li>
            <li><a href="Bond.html">Bond</a> doesn&#8217;t take over completion until an
            explicit <a href="Bond.html#M000001">Bond.complete</a> is called.
            
            </li>
            <li>Order of completion missions matters. The order they&#8217;re defined in is
            the order <a href="Bond.html">Bond</a> searches when looking for a matching
            completion. This means that more specific completions like method and
            object completions should come before more general ones. You can tweak
            completion placement by passing :place to <a
            href="Bond.html#M000001">Bond.complete</a>.
            
            </li>
            <li>If no completion missions match, then <a href="Bond.html">Bond</a> falls
            back on a default mission. If using irb and irb/completion this falls back
            on irb&#8217;s completion. Otherwise an empty completion list is returned.
            
            </li>
            </ul>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000001">complete</a></li>
              <li><a href="#M000003">debrief</a></li>
              <li><a href="#M000002">reset</a></li>
              <li><a href="#M000004">spy</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='class-list'>
              <h2>Classes and Modules</h2>
              Module <a href="Bond/Actions.html" class="link">Bond::Actions</a><br />
              Module <a href="Bond/Rawline.html" class="link">Bond::Rawline</a><br />
              Module <a href="Bond/Readline.html" class="link">Bond::Readline</a><br />
              Module <a href="Bond/Search.html" class="link">Bond::Search</a><br />
              Class <a href="Bond/Agent.html" class="link">Bond::Agent</a><br />
              Class <a href="Bond/FailedExecutionError.html" class="link">Bond::FailedExecutionError</a><br />
              Class <a href="Bond/InvalidMissionActionError.html" class="link">Bond::InvalidMissionActionError</a><br />
              Class <a href="Bond/InvalidMissionError.html" class="link">Bond::InvalidMissionError</a><br />
              Class <a href="Bond/Mission.html" class="link">Bond::Mission</a><br />
              Class <a href="Bond/Missions.html" class="link">Bond::Missions</a><br />
            </div>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000001'>
                <a name='M000001'>      </a>
                <div class='synopsis'>
                  <span class='name'>complete</span>
                  <span class='arguments'>(options={}, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Defines a completion mission aka a <a
                  href="Bond/Mission.html">Bond::Mission</a>. A valid mission consists of a
                  condition and an action block. A condition is specified with one of the
                  following options: :on, :object or :method. Depending on the condition
                  option, a different type of <a href="Bond/Mission.html">Bond::Mission</a>
                  is created. Action blocks are given what the user has typed and should a
                  return a list of possible completions. By default <a
                  href="Bond.html">Bond</a> searches possible completions to only return the
                  ones that match what has been typed. This searching behavior can be
                  customized with the :search option.
                  </p>
                  <h4>Options:</h4>
                  <dl>
                  <dt>:on</dt><dd>Matches the given regular expression with the full line of input. Creates a
                  <a href="Bond/Mission.html">Bond::Mission</a> object. Access to the matches
                  in the regular expression are passed to the completion proc as the
                  input&#8217;s attribute :matched.
                  
                  </dd>
                  <dt>:method</dt><dd>Matches the given string or regular expression with any methods (or any
                  non-whitespace string) that start the beginning of a line. Creates a
                  Bond::Missions:MethodMission object. If given a string, the match has to be
                  exact. Since this is used mainly for argument completion, completions can
                  have an optional quote in front of them.
                  
                  </dd>
                  <dt>:object</dt><dd>Matches the given a string or regular expression to the ancestor of the
                  current object being completed. Creates a <a
                  href="Bond/Missions/ObjectMission.html">Bond::Missions::ObjectMission</a>
                  object. Access to the current object is passed to the completion proc as
                  the input&#8217;s attribute :object. If no action is given, this completion
                  type defaults to all methods the object responds to.
                  
                  </dd>
                  <dt>:search</dt><dd>Given a symbol, proc or false, determines how completions are searched to
                  match what the user has typed. Defaults to traditional searching i.e.
                  looking at the beginning of a string for possible matches. If false, search
                  is turned off and assumed to be done in the action block. Possible symbols
                  are :anywhere, :ignore_case and :underscore. See <a
                  href="Bond/Search.html">Bond::Search</a> for more info about them. A proc
                  is given two arguments: the input string and an array of possible
                  completions.
                  
                  </dd>
                  <dt>:place</dt><dd>Given a symbol or number, controls where this completion is placed in
                  relation to existing ones. If a number, the completion is placed at that
                  number. If the symbol :last, the completion is placed at the end regardless
                  of completions defined after it. Use this symbol as a way of anchoring
                  completions you want to remain at the end. Multiple declarations of :last
                  are kept last in the order they are defined.
                  
                  </dd>
                  </dl>
                  <h4>Examples:</h4>
                  <pre>Bond.complete(:method=&gt;'shoot') {|input| %w{to kill} }&#x000A;Bond.complete(:on=&gt;/^((([a-z][^:.\(]*)+):)+/, :search=&gt;false) {|input| Object.constants.grep(/#{input.matched[1]}/) }&#x000A;Bond.complete(:object=&gt;ActiveRecord::Base, :search=&gt;:underscore, :place=&gt;:last)&#x000A;Bond.complete(:object=&gt;ActiveRecord::Base) {|input| input.object.class.instance_methods(false) }&#x000A;Bond.complete(:method=&gt;'you', :search=&gt;proc {|input, list| list.grep(/#{input}/i)} ) {|input| %w{Only Live Twice} }</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000001-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000001-source'><span class="ruby-comment cmt"># File lib/bond.rb, line 56</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">complete</span>(<span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">complete</span>(<span class="ruby-identifier">options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;    <span class="ruby-keyword kw">true</span>&#x000A;  <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">InvalidMissionError</span>&#x000A;    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Invalid mission given. Mission needs an action and a condition.&quot;</span>&#x000A;    <span class="ruby-keyword kw">false</span>&#x000A;  <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">InvalidMissionActionError</span>&#x000A;    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Invalid mission action given. Make sure action responds to :call or refers to a predefined action that does.&quot;</span>&#x000A;    <span class="ruby-keyword kw">false</span>&#x000A;  <span class="ruby-keyword kw">rescue</span>&#x000A;    <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Mission setup failed with:&quot;</span>, <span class="ruby-identifier">$!</span>&#x000A;    <span class="ruby-keyword kw">false</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000003'>
                <a name='M000003'>      </a>
                <div class='synopsis'>
                  <span class='name'>debrief</span>
                  <span class='arguments'>(options={})</span>
                </div>
                <div class='description'>
                  <p>
                  Debriefs <a href="Bond.html">Bond</a> to set global defaults. Call before
                  defining completions.
                  </p>
                  <h4>Options:</h4>
                  <dl>
                  <dt>:readline_plugin</dt><dd>Specifies a <a href="Bond.html">Bond</a> plugin to interface with a
                  Readline-like library. Available plugins are <a
                  href="Bond/Readline.html">Bond::Readline</a> and <a
                  href="Bond/Rawline.html">Bond::Rawline</a>. Defaults to <a
                  href="Bond/Readline.html">Bond::Readline</a>. Note that a plugin
                  doesn&#8217;t imply use with irb. Irb is joined to the hip with <a
                  href="Bond/Readline.html">Readline</a>.
                  
                  </dd>
                  <dt>:default_mission</dt><dd>A proc to be used as the default completion proc when no completions match
                  or one fails. When in irb with completion enabled, uses irb completion.
                  Otherwise defaults to a proc with an empty completion list.
                  
                  </dd>
                  <dt>:default_search</dt><dd>A symbol or proc to be used as the default search in completions. See <a
                  href="Bond.html#M000001">Bond.complete</a>&#8217;s :search option for valid
                  symbols.
                  
                  </dd>
                  <dt>:eval_binding</dt><dd>Specifies a binding to be used with <a
                  href="Bond/Missions/ObjectMission.html">Bond::Missions::ObjectMission</a>.
                  When in irb, defaults to irb&#8217;s main binding. Otherwise defaults to
                  TOPLEVEL_BINDING.
                  
                  </dd>
                  <dt>:debug</dt><dd>Boolean to print unexpected errors when autocompletion fails. Default is
                  false.
                  
                  </dd>
                  </dl>
                  <h4>Example:</h4>
                  <pre>Bond.debrief :default_search=&gt;:underscore, :default_mission=&gt;:default</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000003-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000003-source'><span class="ruby-comment cmt"># File lib/bond.rb, line 89</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debrief</span>(<span class="ruby-identifier">options</span>={})&#x000A;    <span class="ruby-identifier">config</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-identifier">options</span>&#x000A;    <span class="ruby-identifier">plugin_methods</span> = <span class="ruby-node">%w{setup line_buffer}</span>&#x000A;    <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:readline_plugin</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Module</span>) <span class="ruby-operator">&amp;&amp;</span>&#x000A;      <span class="ruby-identifier">plugin_methods</span>.<span class="ruby-identifier">all?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">config</span>[<span class="ruby-identifier">:readline_plugin</span>].<span class="ruby-identifier">instance_methods</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">to_s</span>}.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">e</span>)}&#x000A;      <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Invalid readline plugin set. Try again.&quot;</span>&#x000A;    <span class="ruby-keyword kw">end</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000002'>
                <a name='M000002'>      </a>
                <div class='synopsis'>
                  <span class='name'>reset</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Resets <a href="Bond.html">Bond</a> so that next time <a
                  href="Bond.html#M000001">Bond.complete</a> is called, a new set of
                  completion missions are created. This does not change current completion
                  behavior.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000002-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000002-source'><span class="ruby-comment cmt"># File lib/bond.rb, line 72</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>&#x000A;    <span class="ruby-ivar">@agent</span> = <span class="ruby-keyword kw">nil</span>&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000004'>
                <a name='M000004'>      </a>
                <div class='synopsis'>
                  <span class='name'>spy</span>
                  <span class='arguments'>(input)</span>
                </div>
                <div class='description'>
                  <p>
                  Reports what completion mission and possible completions would happen for a
                  given input. Helpful for debugging your completion missions.
                  </p>
                  <h4>Example:</h4>
                  <pre>&gt;&gt; Bond.spy &quot;shoot oct&quot;&#x000A;Matches completion mission for method matching &quot;shoot&quot;.&#x000A;Possible completions: [&quot;octopussy&quot;]</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000004-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000004-source'><span class="ruby-comment cmt"># File lib/bond.rb, line 104</span>&#x000A;  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">spy</span>(<span class="ruby-identifier">input</span>)&#x000A;    <span class="ruby-identifier">agent</span>.<span class="ruby-identifier">spy</span>(<span class="ruby-identifier">input</span>)&#x000A;  <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
